{"version":3,"file":"index.js","sources":["../dist-src/Cassette.js","../dist-src/renderText.js","../dist-src/useTalkingTimeout.js","../dist-src/useTalkingText.js","../dist-src/useTalkingTexts.js"],"sourcesContent":["export function cassetteFromString(str) {\n    return [\"\", str];\n}\nexport function newCassette(arg) {\n    return [[], arg];\n}\nexport function isStringCassette(cassette) {\n    const [first] = cassette;\n    return typeof first === \"string\";\n}\nexport function isUnplayed(cassette) {\n    if (isStringCassette(cassette)) {\n        return cassette[0].length === 0;\n    }\n    const [played, remaining] = cassette;\n    if (played.length > 0) {\n        return false;\n    }\n    return remaining.reduce((unplayed, cassette) => {\n        if (unplayed) {\n            return isUnplayed(cassette);\n        }\n        return false;\n    }, true);\n}\nexport function isFinished([_played, remaining]) {\n    return remaining.length === 0;\n}\nexport function fastForward(cassette) {\n    const forwardedCassette = next(cassette);\n    if (isFinished(forwardedCassette)) {\n        return forwardedCassette;\n    }\n    return fastForward(forwardedCassette);\n}\nexport function rewind(cassette) {\n    if (isUnplayed(cassette)) {\n        return cassette;\n    }\n    if (isStringCassette(cassette)) {\n        const [played, remaining] = cassette;\n        return [\"\", played + remaining];\n    }\n    const [played, remaining] = cassette;\n    return [[], [...played.map(cassetteFromString), ...remaining.map(rewind)]];\n}\nexport function cassetteAsString(cassette) {\n    if (!isStringCassette(cassette)) {\n        const [played, remaining] = cassette;\n        return [played.join(\"\"), remaining.map(cassetteAsString).join(\"\")].join(\"\");\n    }\n    return cassette.join(\"\");\n}\nexport function lastPlayedChar([played, remaining]) {\n    if (typeof remaining !== \"string\" &&\n        remaining.length > 0 &&\n        !isUnplayed(remaining[0])) {\n        return lastPlayedChar(remaining[0]);\n    }\n    if (typeof played !== \"string\") {\n        if (played.length > 0) {\n            const lastPlayed = played[played.length - 1];\n            return lastPlayed.substr(-1, 1);\n        }\n        return undefined;\n    }\n    if (played.length === 0) {\n        return undefined;\n    }\n    return played.substr(-1, 1);\n}\nexport function playedStrings([played, remaining]) {\n    if (typeof played === \"string\") {\n        return [played];\n    }\n    const [firstRemaining] = remaining;\n    if (firstRemaining &&\n        typeof firstRemaining !== \"string\" &&\n        !isUnplayed(firstRemaining)) {\n        return [...played, ...playedStrings(firstRemaining)];\n    }\n    return played;\n}\nexport function nextChar([_played, remaining]) {\n    const [nextVal] = remaining;\n    if (nextVal === undefined) {\n        return nextVal;\n    }\n    if (typeof nextVal === \"string\") {\n        return nextVal;\n    }\n    return nextChar(nextVal);\n}\nexport function next(cassette) {\n    // start\n    // [[], [[\"\", \"hi\"], [\"\", \"no\"]]]\n    // next\n    // [[], [[\"h\", \"i\"], [\"\", \"no\"]]]\n    // next\n    // [[\"hi\"], [[\"n\", \"o\"]]]\n    // next\n    // [[\"hi\", \"no\"], []]\n    if (isFinished(cassette)) {\n        return cassette;\n    }\n    if (isStringCassette(cassette)) {\n        const [played, remaining] = cassette;\n        return [played + nextChar(cassette), remaining.substring(1)];\n    }\n    const [playedCassettes, remainingCassettes] = cassette;\n    const [firstRemainingCassette, ...restRemainingCassettes] = remainingCassettes;\n    const nextFirstCassette = next(firstRemainingCassette);\n    if (isFinished(nextFirstCassette)) {\n        return [\n            [...playedCassettes, cassetteAsString(nextFirstCassette)],\n            restRemainingCassettes\n        ];\n    }\n    return [playedCassettes, [nextFirstCassette, ...restRemainingCassettes]];\n}\nexport function didJustFinishSomething([played, remaining]) {\n    if (typeof played !== \"string\") {\n        const lastPlayed = played[played.length - 1];\n        const [firstRemaining] = remaining;\n        if (lastPlayed && firstRemaining && typeof firstRemaining !== \"string\") {\n            return isUnplayed(firstRemaining);\n        }\n    }\n    return remaining.length === 0;\n}\nexport function justFinishedString(cassette) {\n    if (didJustFinishSomething(cassette)) {\n        if (isStringCassette(cassette) && isFinished(cassette)) {\n            return cassetteAsString(cassette);\n        }\n        const [played] = cassette;\n        if (typeof played !== \"string\") {\n            const lastPlayed = played[played.length - 1];\n            if (lastPlayed) {\n                return lastPlayed;\n            }\n        }\n    }\n    return undefined;\n}\n","import React from \"react\";\nexport default function renderText(textArg) {\n    const text = typeof textArg === \"string\" ? textArg : textArg[0];\n    const options = typeof textArg === \"string\" ? {} : textArg[1];\n    const Outer = options.textElement || React.Fragment;\n    const { charElement } = options;\n    const inner = charElement\n        ? text\n            .split(\"\")\n            .map((char, i) => char === \"\\n\"\n            ? char\n            : React.createElement(charElement, { key: i }, char))\n        : text;\n    return React.createElement(Outer, null, inner);\n}\n","import { useCallback, useRef, useEffect } from \"react\";\nimport { justFinishedString, fastForward, lastPlayedChar, next, playedStrings, isFinished, nextChar, rewind } from \"./Cassette\";\nfunction defaultGetPace(character) {\n    switch (character) {\n        case \".\":\n        case \",\":\n        case \"?\":\n        case \"!\":\n        case \"-\":\n            return 120;\n        default:\n            return 20;\n    }\n}\nexport default function useTalkingTimeout(setCassette, cassette, { onCharacter, onFinished, pace }) {\n    const timeoutRef = useRef(null);\n    const onCharacterRef = useRef(onCharacter);\n    const onFinishedRef = useRef(onFinished);\n    const paceRef = useRef(pace || defaultGetPace);\n    const shouldFireOnFinishRef = useRef(true);\n    const cassetteIsFinished = isFinished(cassette);\n    onCharacterRef.current = onCharacter;\n    onFinishedRef.current = onFinished;\n    paceRef.current = pace || defaultGetPace;\n    useEffect(() => {\n        if (!cassetteIsFinished) {\n            const lastChar = lastPlayedChar(cassette);\n            timeoutRef.current = setTimeout(() => {\n                const nextCharacter = nextChar(cassette);\n                if (onCharacterRef.current && nextCharacter) {\n                    onCharacterRef.current(nextCharacter, playedStrings(next(cassette)).join(\"\").length - 1);\n                }\n                const justDone = justFinishedString(next(cassette));\n                if (onFinishedRef.current && justDone) {\n                    onFinishedRef.current(justDone);\n                }\n                setCassette((prevCassette) => next(prevCassette));\n            }, lastChar ? paceRef.current(lastChar) : 0);\n            return () => {\n                if (timeoutRef.current) {\n                    clearTimeout(timeoutRef.current);\n                }\n            };\n        }\n    }, [cassetteIsFinished, cassette, setCassette]);\n    const skip = useCallback(() => {\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n        }\n        if (shouldFireOnFinishRef.current) {\n            shouldFireOnFinishRef.current = false;\n            const finishedCassette = fastForward(cassette);\n            const justDone = justFinishedString(finishedCassette);\n            if (onFinishedRef.current && justDone) {\n                onFinishedRef.current(justDone);\n            }\n            setCassette(finishedCassette);\n        }\n    }, [cassette, setCassette]);\n    const rewindCassette = useCallback(() => {\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n        }\n        shouldFireOnFinishRef.current = true;\n        setCassette(rewind(cassette));\n    }, [cassette, setCassette]);\n    return [skip, rewindCassette];\n}\n","import { useState, useEffect } from \"react\";\nimport { cassetteFromString, playedStrings } from \"./Cassette\";\nimport renderText from \"./renderText\";\nimport useTalkingTimeout from \"./useTalkingTimeout\";\nfunction useTalkingText(text, options = {}) {\n    const [cassette, setCassette] = useState(cassetteFromString(text));\n    useEffect(() => {\n        setCassette(cassetteFromString(text));\n    }, [text]);\n    const [skip, rewind] = useTalkingTimeout(setCassette, cassette, options);\n    return [\n        renderText([playedStrings(cassette).join(\"\"), options]),\n        skip,\n        rewind\n    ];\n}\nexport default useTalkingText;\n","import React, { useRef, useEffect } from \"react\";\nimport { cassetteFromString, newCassette, playedStrings, cassetteAsString, isFinished, next } from \"./Cassette\";\nimport { useState } from \"react\";\nimport renderText from \"./renderText\";\nimport useTalkingTimeout from \"./useTalkingTimeout\";\nfunction unzip(arr) {\n    return [arr.map(([first]) => first), arr.map(([_first, second]) => second)];\n}\nfunction talkingTextfromArg(textArg) {\n    const textCassette = typeof textArg !== \"string\" ? textArg[0] : textArg;\n    const options = typeof textArg !== \"string\" ? textArg[1] : {};\n    return [cassetteFromString(textCassette), options];\n}\nexport function mapTextArgs(args, map) {\n    return args\n        .map(arg => {\n        if (typeof arg === \"string\") {\n            return [arg, {}];\n        }\n        return arg;\n    })\n        .map(map);\n}\nexport default function useTalkingTexts(textArgs, options) {\n    const [textCassettes, textOptions] = unzip(textArgs.map(talkingTextfromArg));\n    const [textsCassette, setTextsCassette] = useState(newCassette(textCassettes));\n    if (cassetteAsString(textsCassette) !==\n        cassetteAsString(newCassette(textCassettes))) {\n        setTextsCassette(newCassette(textCassettes));\n    }\n    const allIsFinished = isFinished(textsCassette);\n    const didTriggerOnFinishRef = useRef(false);\n    const nextOptions = textOptions[playedStrings(next(textsCassette)).length - 1] || {};\n    const [skip, rewind] = useTalkingTimeout(setTextsCassette, textsCassette, nextOptions);\n    const playedCassettes = playedStrings(textsCassette);\n    useEffect(() => {\n        if (didTriggerOnFinishRef.current && !allIsFinished) {\n            didTriggerOnFinishRef.current = false;\n        }\n        else if (!didTriggerOnFinishRef.current && allIsFinished) {\n            didTriggerOnFinishRef.current = true;\n            if (options && options.onFinished) {\n                options.onFinished(cassetteAsString(textsCassette));\n            }\n        }\n    }, [allIsFinished, textsCassette, options]);\n    return [\n        playedCassettes.map((text, i) => (React.createElement(React.Fragment, { key: i }, renderText([text, textOptions[i]])))),\n        skip,\n        rewind\n    ];\n}\n"],"names":[],"mappings":"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"}